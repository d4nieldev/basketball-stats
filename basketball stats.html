<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.slim.min.js" integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI=" crossorigin="anonymous"></script>
    <title>חישוב סטטיסטיקה</title>
    <style>
        .input-group-text{
            background-color: black;
            color: white;
        }
        .form-control{
            border: 1px solid black;
        }
    </style>
</head>
<body style="direction: rtl;">
    <div class="container">
        <h1 class="text-center">חישוב סטטיסטיקה כדורסל</h1>
        <button type="button" class="btn btn-info" id="btnNBAstats">הזנת נתוני ליגה וקבוצות ממוצעים NBA</button>
        <form id="statistics">
            <div class="input-group">
                <div class="input-group-text">שלשות שקלעתי</div>
                <input id="p3_in" class="form-control" type="number" step="0.001">
                <div class="input-group-text">שלשות שנזרקו</div>
                <input id="p3_attempts" class="form-control" type="number" step="0.001">
            </div>
            <div id="p3_ratio"></div>
            <div class="input-group">
                <div class="input-group-text">חצי מרחק שקלעתי</div>
                <input id="p2_in" class="form-control" type="number" step="0.001">
                <div class="input-group-text">חצי מרחק שנזרקו</div>
                <input id="p2_attempts" class="form-control" type="number" step="0.001">
            </div>
            <div id="p2_ratio"></div>
            <div class="input-group">
                <div class="input-group-text">עונשין שקלעתי</div>
                <input id="ft_in" class="form-control" type="number" step="0.001">
                <div class="input-group-text">עונשין שנזרקו</div>
                <input id="ft_attempts" class="form-control" type="number" step="0.001">
            </div>
            <div id="ft_ratio"></div>

            <div class="input-group">
                <div class="input-group-text">שלשות שקלעו עליי</div>
                <input id="p3_on_me" class="form-control" type="number" step="0.001" value="0">
                <div class="input-group-text">שלשות שנזרקו עליי</div>
                <input id="p3_attempts_on_me" class="form-control" type="number" step="0.001" value="0">
            </div>
            <div id="p3_ratio_on_me"></div>
            <div class="input-group">
                <div class="input-group-text">חצי מרחק שקלעו עליי</div>
                <input id="p2_on_me" class="form-control" type="number" step="0.001" value="0">
                <div class="input-group-text">חצי מרחק שנזרקו עליי</div>
                <input id="p2_attempts_on_me" class="form-control" type="number" step="0.001" value="0">
            </div>
            <div id="p2_ratio_on_me"></div>
            <div class="input-group">
                <div class="input-group-text">עונשין שנקלעו בגללי</div>
                <input id="ft_on_me" class="form-control" type="number" step="0.001" value="0">
                <div class="input-group-text">עונשין שנזרקו עליי</div>
                <input id="ft_attempts_on_me" class="form-control" type="number" step="0.001" value="0">
            </div>
            <div id="ft_ratio_on_me"></div>

            <div class="input-group">
                <div class="input-group-text">אסיסטים</div>
                <input id="assists" class="form-control" type="number" step="0.001">
            </div>
            <div class="input-group">
                <div class="input-group-text">ריבאונד הגנה</div>
                <input id="d_rebounds" class="form-control" type="number" step="0.001">
            </div>
            <div class="input-group">
                <div class="input-group-text">ריבאונד התקפה</div>
                <input id="off_rebound" class="form-control" type="number" step="0.001">
            </div>
            <div class="input-group">
                <div class="input-group-text">חטיפות</div>
                <input id="steals" class="form-control" type="number" step="0.001">
            </div>
            <div class="input-group">
                <div class="input-group-text">בלוקים</div>
                <input id="blocks" class="form-control" type="number" step="0.001">
            </div>
            <div class="input-group">
                <div class="input-group-text">איבודי כדור</div>
                <input id="turnovers" class="form-control" type="number" step="0.001">
            </div>
            <div class="input-group">
                <div class="input-group-text">דקות משחק</div>
                <input id="minutes_of_play" class="form-control" type="number" step="0.001">
            </div>

            <div class="input-group">
                <div class="input-group-text">אחוז השלשות של הקבוצה</div>
                <input id="p3_team_ratio" class="form-control" type="number" step="0.001">
                <div class="input-group-text">אחוז החצי מרחק של הקבוצה</div>
                <input id="p2_team_ratio" class="form-control" type="number" step="0.001">
                <div class="input-group-text">אחוז העונשין של הקבוצה</div>
                <input id="ft_team_ratio" class="form-control" type="number" step="0.001">
            </div>
            <div class="input-group">
                <div class="input-group-text">אחוז זריקות השלשות בהתקפה ממוצעת בקבוצה</div>
                <input id="p3_team_attack_ratio" class="form-control" type="number" step="0.001">
                <div class="input-group-text">אחוז זריקות החצי מרחק בהתקפה ממוצעת בקבוצה</div>
                <input id="p2_team_attack_ratio" class="form-control" type="number" step="0.001">
                <div class="input-group-text">אחוז זריקות העונשין בהתקפה ממוצעת בקבוצה</div>
                <input id="ft_team_attack_ratio" class="form-control" type="number" step="0.001">
            </div>
            <div class="input-group">
                <div class="input-group-text">אחוז השלשות של הליגה</div>
                <input id="p3_league_ratio" class="form-control" type="number" step="0.001">
                <div class="input-group-text">אחוז החצי מרחק של הליגה</div>
                <input id="p2_league_ratio" class="form-control" type="number" step="0.001">
                <div class="input-group-text">אחוז העונשין של הליגה</div>
                <input id="ft_league_ratio" class="form-control" type="number" step="0.001">
            </div>
            <div class="input-group">
                <div class="input-group-text">אחוז זריקות השלשות בהתקפה ממוצעת בליגה</div>
                <input id="p3_league_attack_ratio" class="form-control" type="number" step="0.001">
                <div class="input-group-text">אחוז זריקות החצי מרחק בהתקפה ממוצעת בליגה</div>
                <input id="p2_league_attack_ratio" class="form-control" type="number" step="0.001">
                <div class="input-group-text">אחוז זריקות העונשין בהתקפה ממוצעת בליגה</div>
                <input id="ft_league_attack_ratio" class="form-control" type="number" step="0.001">
            </div>
            <center>
                <span id="total"></span>
                <button type="submit" class="btn btn-primary mt-1">חישוב סטטיסטיקה</button>
            </center>
            
        </form>
    </div>

    <script>
        $(document).ready(function(){
            $("#btnNBAstats").on("click", function(){
                console.log("!");
                $("#p3_team_ratio").val("0.38");
                $("#p2_team_ratio").val("0.48");
                $("#ft_team_ratio").val("0.8");
                $("#p3_team_attack_ratio").val("0.24");
                $("#p2_team_attack_ratio").val("0.6");
                $("#ft_team_attack_ratio").val("0.16");

                $("#p3_league_ratio").val("0.38");
                $("#p2_league_ratio").val("0.48");
                $("#ft_league_ratio").val("0.8");
                $("#p3_league_attack_ratio").val("0.24");
                $("#p2_league_attack_ratio").val("0.6");
                $("#ft_league_attack_ratio").val("0.16");
            });
            $("#statistics").on("submit", function(e){
                e.preventDefault();

                p3_in = parseFloat($("#p3_in").val())
                p3_attempts = parseFloat($("#p3_attempts").val())
                p3_ratio = p3_in / p3_attempts
                if (!Number.isFinite(p3_ratio)) p3_ratio = 1
                $("#p3_ratio").html(p3_ratio)

                p2_in = parseFloat($("#p2_in").val())
                p2_attempts = parseFloat($("#p2_attempts").val())
                p2_ratio = p2_in / p2_attempts
                if (!Number.isFinite(p2_ratio)) p2_ratio = 1
                $("#p2_ratio").html(p2_ratio)

                ft_in = parseFloat($("#ft_in").val())
                ft_attempts = parseFloat($("#ft_attempts").val())
                ft_ratio = ft_in / ft_attempts
                if (!Number.isFinite(ft_ratio)) ft_ratio = 1
                $("#ft_ratio").html(ft_ratio)

                p3_on_me = parseFloat($("#p3_on_me").val())
                p3_attempts_on_me = parseFloat($("#p3_attempts_on_me").val())
                p3_ratio_on_me = p3_on_me / p3_attempts_on_me
                if (!Number.isFinite(p3_ratio_on_me)) p3_ratio_on_me = 1
                $("#p3_ratio_on_me").html(p3_ratio_on_me)

                p2_on_me = parseFloat($("#p2_on_me").val())
                p2_attempts_on_me = parseFloat($("#p2_attempts_on_me").val())
                p2_ratio_on_me = p2_on_me / p2_attempts_on_me
                if (!Number.isFinite(p2_ratio_on_me)) p2_ratio_on_me = 1
                $("#p2_ratio_on_me").html(p2_ratio_on_me)

                ft_on_me = parseFloat($("#ft_on_me").val())
                ft_attempts_on_me = parseFloat($("#ft_attempts_on_me").val())
                ft_ratio_on_me = ft_on_me / ft_attempts_on_me
                if (!Number.isFinite(ft_ratio_on_me)) ft_ratio_on_me = 1
                $("#ft_ratio_on_me").html(ft_ratio_on_me)

                assists = parseFloat($("#assists").val())
                d_rebounds = parseFloat($("#d_rebounds").val())
                off_rebound = parseFloat($("#off_rebound").val())
                steals = parseFloat($("#steals").val())
                blocks = parseFloat($("#blocks").val())
                turnovers = parseFloat($("#turnovers").val())
                minutes_of_play = parseFloat($("#minutes_of_play").val())

                p3_team_ratio = parseFloat($("#p3_team_ratio").val())
                p2_team_ratio = parseFloat($("#p2_team_ratio").val())
                ft_team_ratio = parseFloat($("#ft_team_ratio").val())

                p3_team_attack_ratio = parseFloat($("#p3_team_attack_ratio").val())
                p2_team_attack_ratio = parseFloat($("#p2_team_attack_ratio").val())
                ft_team_attack_ratio = parseFloat($("#ft_team_attack_ratio").val())

                p3_league_ratio = parseFloat($("#p3_league_ratio").val())
                p2_league_ratio = parseFloat($("#p2_league_ratio").val())
                ft_league_ratio = parseFloat($("#ft_league_ratio").val())

                p3_league_attack_ratio = parseFloat($("#p3_league_attack_ratio").val())
                p2_league_attack_ratio = parseFloat($("#p2_league_attack_ratio").val())
                ft_league_attack_ratio = parseFloat($("#ft_league_attack_ratio").val())

                

                assist_val = 3*p3_league_attack_ratio + 2*p2_league_attack_ratio + 2*ft_league_attack_ratio*ft_league_ratio - (3*p3_team_ratio*p3_team_attack_ratio + 2*p2_team_attack_ratio*p2_team_ratio + 2*ft_team_ratio*ft_team_attack_ratio)
                d_rebound_val = 3*p3_league_attack_ratio*p3_league_ratio + 2*p2_league_attack_ratio*p2_league_ratio + 2*ft_league_ratio*ft_league_attack_ratio
                off_rebound_val = d_rebound_val + 2*p2_ratio*p2_league_attack_ratio + 2*ft_ratio*ft_league_attack_ratio
                steal_val = d_rebound_val + 3*p3_ratio*p3_league_attack_ratio + 2*p2_ratio*p2_league_attack_ratio + 2*ft_ratio*ft_league_attack_ratio
                block_val = 0.57*d_rebound_val
                turnover_val = steal_val

                total = p3_in*p3_ratio + p2_in*p2_ratio + ft_in*ft_ratio + assist_val*assists + d_rebound_val*d_rebounds + off_rebound_val*off_rebound + steal_val*steals + block_val*blocks - turnover_val*turnovers - (p3_on_me*p3_ratio_on_me + p2_on_me*p2_ratio_on_me + ft_on_me*ft_ratio_on_me)
                total = total / minutes_of_play

                $("#total").html("ניקוד שחקן: " + total)
            });
        });
        
    </script>
</body>
</html>